<div class="bredcrumbs">
    <span routerLink="/sales">Finanzas  </span>
    <span class="material-icons">
        keyboard_arrow_right
    </span>
    <span>Ventas</span>
</div>
<br>
<div class="m-content-tabs-item ed-grid m-gap-1 s-grid-2 m-grid-2" style="border-radius: 20px;    width: 83%;">
    <div class="m-item-select s-main-center" routerLink="/sales">
        Ventas</div>
    <div class="m-item-unselect s-main-center" routerLink="/payments">
        Pagos</div>
</div>
<br>
<section class="m-filters">
    <article class="m-page-content ed-grid m-main-end rows-gap s-gap-05 m-gap-05  s-grid-1 m-grid-3 lg-grid-5">
        <div>
            <mat-list-item class="primary-imenu-item" role="listitem">
                <mat-form-field class="select-form">
                    <mat-select name="genero" placeholder="Año" class="filter-select" [(ngModel)]="filterDate.anio"  (ngModelChange)="filtersSales()"  > 
                        <mat-option value="0">Ninguno</mat-option>
                        <mat-option value="2020">2020</mat-option>
                        <mat-option value="2021">2021</mat-option>
                        <mat-option value="2021">2022</mat-option>
                        <mat-option value="2021">2023</mat-option>
                        <mat-option value="2021">2024</mat-option>
                        <mat-option value="2021">2025</mat-option>
                        <mat-option value="2021">2026</mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-list-item>
        </div>
        <div>
            <mat-list-item class="primary-imenu-item" role="listitem">
                <mat-form-field class="select-form">
                    <mat-select name="genero" placeholder="Mes" class="filter-select" [(ngModel)]="filterDate.mes"  (ngModelChange)="filtersSales()">
                        <mat-option  value="0">Ninguno</mat-option>
                        <mat-option value="1">Enero</mat-option>
                        <mat-option value="2">Febrero</mat-option>
                        <mat-option value="3">Marzo</mat-option>
                        <mat-option value="4">Abril</mat-option>
                        <mat-option value="5">Mayo</mat-option>
                        <mat-option value="6">Junio</mat-option>
                        <mat-option value="7">Julio</mat-option>
                        <mat-option value="8">Agosto</mat-option>
                        <mat-option value="9">Setiembre</mat-option>
                        <mat-option value="10">Octubre</mat-option>
                        <mat-option value="11">Noviembre</mat-option>
                        <mat-option value="12">Diciembre</mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-list-item>
        </div>


        <div>
            <mat-form-field>
                <mat-date-range-input [rangePicker]="picker">
                    <input  placeholder="Fecha Inicial" matStartDate matInput [(ngModel)]="startDate">
                    <input placeholder="Fecha Final" matEndDate matInput [(ngModel)]="endDate" (dateChange)="filterSalesRange('filter')" >
                </mat-date-range-input>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
        </div>

        <div class="s-cols-1 m-cols-2 s-main-center m-main-end">
            <div class="input-group" style="float: left;width: auto">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="height: 38px;">
                        <span class="material-icons">
                            search
                        </span>
                    </span>
                </div>
                <input #SearchInput type="text" class="form-control m-txt-search"
                    [(ngModel)]="searchName" placeholder="Buscar">
            </div>
            <a href="{{_backendUrl.backendApis}}api/sell/download"  class="m-line-vertical m-main-end" style="float: left;">
                <span class="material-icons m-export">
                    save_alt
                </span>
            </a>
         
        </div>
    </article>
</section>


<div class="example-container mat-elevation-z8">
    <div class="example-table-container style-1">
        <table mat-table [dataSource]="sortedData" class="example-table" matSort matSortActive="completeName"
            matSortDisableClear matSortDirection="desc"  (matSortChange)="sortData($event)">
            <ng-container matColumnDef="photo">
                <th mat-header-cell *matHeaderCellDef>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <td mat-cell *matCellDef="let row">
                    <div>
                        <img class="m-photo-perfil-grid" src="../../../../../assets/img/avatar.jpg">
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="completeName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Alumno</th>
                <td mat-cell *matCellDef="let row">{{row.completeName}}</td>
            </ng-container>

            <ng-container matColumnDef="cellphone">
                <th mat-header-cell *matHeaderCellDef>
                    <aside>Télefono</aside>
                </th>
                <td mat-cell *matCellDef="let row">{{row.cellphone}}</td>
            </ng-container>


            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef>
                    <nav>Correo</nav>
                </th>
                <td mat-cell *matCellDef="let row">{{row.email}}</td>
            </ng-container>

            <ng-container matColumnDef="nrStudents">
                <th mat-header-cell *matHeaderCellDef>
                    <nav>No. Alumnos</nav>
                </th>
                <td mat-cell *matCellDef="let row">{{row.nrStudents}}</td>
            </ng-container>

            <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef>
                    <nav>Fecha</nav>
                </th>
                <td mat-cell *matCellDef="let row">{{row.date |date:"dd/MM/yyyy"}}</td>
            </ng-container>

            <ng-container matColumnDef="hours">
                <th mat-header-cell *matHeaderCellDef>
                    <nav>Paquete</nav>
                </th>
                <td mat-cell *matCellDef="let row">{{row.hours}} Horas</td>
            </ng-container>

            <ng-container matColumnDef="sesiones">
                <th mat-header-cell *matHeaderCellDef>
                    <nav>Sesiones</nav>
                </th>
                <td mat-cell *matCellDef="let row"></td>
            </ng-container>

            <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef>
                    <nav>Monto</nav>
                </th>
                <td mat-cell *matCellDef="let row">{{row.total}}. 00</td>
            </ng-container>

            <ng-container matColumnDef="pagado">
                <th mat-header-cell *matHeaderCellDef style="text-align: center;">
                    <nav>Pagado</nav>
                </th>
                <td mat-cell *matCellDef="let row" style="text-align: center;">
                    <span *ngIf="row.status == 'PAID'" class="material-icons" style="color: #05beee;">
                        credit_card
                    </span>
                    <span title="Pagar" style="cursor: pointer;" *ngIf="row.status == 'PENDING'" (click)="btnPagar(row)" class="m-deben">T</span>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <div class="m-total">
        <div style="float: left;">Total</div>
        <div style="text-align: right;">S/. {{totalVentas}}.00</div>
    </div>
    <mat-paginator  [pageSize]="20" [length]="resultsLength" (page)="getServerDataPaginator($event)" >
    </mat-paginator>
</div>