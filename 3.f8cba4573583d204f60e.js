(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"9lG/":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),r=n("ZRew"),o=n("tk/3"),c=n("3Pt+"),s=n("fXoL");let l=(()=>{class e{}return e.\u0275mod=s.Vb({type:e}),e.\u0275inj=s.Ub({factory:function(t){return new(t||e)},imports:[[i.c,r.c,o.b,c.g]]}),e})()},VfSc:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n("fXoL"),r=n("MWB6"),o=n("FQVY"),c=n("ofXK"),s=n("ZRew");function l(e,t){if(1&e){const e=i.ec();i.dc(0,"div",10),i.oc("click",(function(){return i.Pc(e),(0,i.sc().openFileSelector)()})),i.ad(1,"Subir archivo"),i.cc()}}function a(e,t){1&e&&i.Yb(0,"div",11)}function d(e,t){if(1&e&&(i.dc(0,"div"),i.Yc(1,l,2,0,"div",8),i.Yc(2,a,1,0,"div",9),i.cc()),2&e){const e=i.sc(2);i.Kb(1),i.zc("ngIf",!e.loadinguUpload),i.Kb(1),i.zc("ngIf",e.loadinguUpload)}}function p(e,t){if(1&e){const e=i.ec();i.dc(0,"div"),i.dc(1,"div",12),i.Yb(2,"div",13),i.dc(3,"a",14),i.ad(4),i.cc(),i.dc(5,"span",15),i.oc("click",(function(){i.Pc(e);const n=t.index,r=t.$implicit;return i.sc(2).deleteFile(n,r.id)})),i.dc(6,"span",16),i.ad(7," delete "),i.cc(),i.cc(),i.cc(),i.Yb(8,"div",17),i.cc()}if(2&e){const e=t.$implicit,n=t.index,r=i.sc(2);i.Kb(2),i.Cc("id","loadingDelete",r.nameGroup,"",n,""),i.Kb(1),i.Cc("id","texLoader",r.nameGroup,"",n,""),i.Ac("href",e.url,i.Rc),i.Kb(1),i.bd(e.nameFile)}}function u(e,t){if(1&e){const e=i.ec();i.dc(0,"section",2),i.dc(1,"div"),i.dc(2,"ngx-file-drop",3),i.oc("onFileDrop",(function(t){return i.Pc(e),i.sc().dropped(t)}))("onFileOver",(function(t){return i.Pc(e),i.sc().fileOver(t)}))("onFileLeave",(function(t){return i.Pc(e),i.sc().fileLeave(t)})),i.Yc(3,d,3,2,"ng-template",4),i.cc(),i.cc(),i.dc(4,"div",5),i.dc(5,"div",6),i.Yc(6,p,9,6,"div",7),i.cc(),i.cc(),i.cc()}if(2&e){const e=i.sc();i.Kb(6),i.zc("ngForOf",e.filesData)}}function f(e,t){if(1&e){const e=i.ec();i.dc(0,"span",19),i.oc("click",(function(){return i.Pc(e),(0,i.sc().openFileSelector)()})),i.ad(1," add_circle "),i.cc()}}function g(e,t){1&e&&i.Yb(0,"div",11)}function b(e,t){if(1&e&&(i.Yc(0,f,2,0,"span",18),i.Yc(1,g,1,0,"div",9)),2&e){const e=i.sc(2);i.zc("ngIf",!e.loadinguUpload),i.Kb(1),i.zc("ngIf",e.loadinguUpload)}}function h(e,t){if(1&e){const e=i.ec();i.dc(0,"section"),i.dc(1,"ngx-file-drop",3),i.oc("onFileDrop",(function(t){return i.Pc(e),i.sc().dropped(t)}))("onFileOver",(function(t){return i.Pc(e),i.sc().fileOver(t)}))("onFileLeave",(function(t){return i.Pc(e),i.sc().fileLeave(t)})),i.Yc(2,b,2,2,"ng-template",4),i.cc(),i.cc()}}function m(e,t){if(1&e){const e=i.ec();i.dc(0,"span",19),i.oc("click",(function(){return i.Pc(e),(0,i.sc().openFileSelector)()})),i.ad(1," add_circle "),i.cc()}}function v(e,t){1&e&&i.Yb(0,"div",11)}function O(e,t){if(1&e&&(i.Yc(0,m,2,0,"span",18),i.Yc(1,v,1,0,"div",9)),2&e){const e=i.sc(2);i.zc("ngIf",!e.loadinguUpload),i.Kb(1),i.zc("ngIf",e.loadinguUpload)}}function D(e,t){if(1&e){const e=i.ec();i.dc(0,"div"),i.dc(1,"ngx-file-drop",20),i.oc("onFileOver",(function(t){return i.Pc(e),i.sc().fileOver(t)}))("onFileLeave",(function(t){return i.Pc(e),i.sc().fileLeave(t)})),i.Yc(2,O,2,2,"ng-template",4),i.cc(),i.cc()}}let F=(()=>{class e{constructor(e,t){this.uploadFileService=e,this.generalService=t,this.filesData=[],this.loadinguUpload=!1,this.typeUpload="drag",this.getresourceDTOList=[],this.responseData=new i.r,this.files=[]}ngOnInit(){this.getresourceDTOList.length>0&&this.getresourceDTOList.forEach(e=>{this.filesData.push({id:e.id,typeUpload:this.typeUpload,nameFile:e.field,nameGroup:e.name,url:e.url}),this.responseData.emit(this.filesData)})}dropped(e){for(const t of e)t.fileEntry.isFile&&t.fileEntry.file(e=>{if(e.size<=2097152){const n=new FormData;let i=this.allowedfiles,r=e.name.split(".");i.includes(r[r.length-1].toLowerCase())?(n.append("resource",e),n.append("resourceType",new Blob([JSON.stringify({name:this.nameGroup,folder:this.folder,field:t.relativePath})],{type:"application/json"})),this.loadinguUpload=!0,this.uploadFileService.uploadFile(n).then(e=>{let n={};e.objetoRespuesta.forEach(e=>{n={id:e.id,typeUpload:this.typeUpload,nameFile:t.relativePath,nameGroup:e.name,url:e.url},this.filesData.push(n),this.responseData.emit(this.filesData),this.loadinguUpload=!1})}).catch(e=>{})):alert("Formato Incorrecto")}else alert("El file excede los 2MG")})}deleteFile(e,t){if(this.idUser){let n={id:this.idUser,role:this.UserRole,resourceDTO:[{id:t}]};document.getElementById("texLoader"+this.nameGroup+e).style.display="none",document.getElementById("loadingDelete"+this.nameGroup+e).style.display="block",this.generalService.deleteFile(n).subscribe(t=>{"OK"===t.statusText?(this.filesData.splice(e,1),document.getElementById("loadingDelete"+this.nameGroup+e).style.display="none"):document.getElementById("texLoader"+this.nameGroup+e).style.display="block"})}else this.filesData.splice(e,1)}fileOver(e){}fileLeave(e){}}return e.\u0275fac=function(t){return new(t||e)(i.Xb(r.a),i.Xb(o.a))},e.\u0275cmp=i.Rb({type:e,selectors:[["app-upload-file"]],inputs:{nameGroup:"nameGroup",folder:"folder",idUser:"idUser",UserRole:"UserRole",typeUpload:"typeUpload",allowedfiles:"allowedfiles",getresourceDTOList:"getresourceDTOList"},outputs:{responseData:"responseData"},decls:3,vars:3,consts:[["class","ed-grid rows-gap s-gap-05 m-gap-1 s-grid-1 m-grid-2 lg-grid-4",4,"ngIf"],[4,"ngIf"],[1,"ed-grid","rows-gap","s-gap-05","m-gap-1","s-grid-1","m-grid-2","lg-grid-4"],["dropZoneLabel","Drop files here",1,"contenedorUpload",3,"onFileDrop","onFileOver","onFileLeave"],["ngx-file-drop-content-tmp",""],[1,"upload-table","m-cols-3"],[1,"upload-name-style"],[4,"ngFor","ngForOf"],["class","btn btn-files","type","button",3,"click",4,"ngIf"],["class","spinner-border text-danger",4,"ngIf"],["type","button",1,"btn","btn-files",3,"click"],[1,"spinner-border","text-danger"],[2,"padding","10px"],[1,"spinner-border","text-danger",2,"display","none","float","left",3,"id"],[2,"float","left",3,"id","href"],["title","Eliminar",1,"m-btn-delete-file",3,"click"],[1,"material-icons","m-router-remove"],[1,"m-line"],["class","material-icons m-btn-upload",3,"click",4,"ngIf"],[1,"material-icons","m-btn-upload",3,"click"],[1,"contenedorUpload",3,"onFileOver","onFileLeave"]],template:function(e,t){1&e&&(i.Yc(0,u,7,1,"section",0),i.Yc(1,h,3,0,"section",1),i.Yc(2,D,3,0,"div",1)),2&e&&(i.zc("ngIf","drag"==t.typeUpload),i.Kb(1),i.zc("ngIf","profile"==t.typeUpload),i.Kb(1),i.zc("ngIf","questionsOptions"==t.typeUpload))},directives:[c.o,s.a,s.b,c.n],styles:[".m-line[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1)}.m-btn-delete-file[_ngcontent-%COMP%]{text-align:right;display:block;color:#007bff;cursor:pointer}.contenedorUpload[_ngcontent-%COMP%]     .ngx-file-drop__drop-zone{border:none}.m-btn-upload[_ngcontent-%COMP%]{color:#05beee;font-size:50px;cursor:pointer}.btn-info[_ngcontent-%COMP%]{background:#05beee}.btn-files[_ngcontent-%COMP%]{width:135px;height:31px;padding:3px;border-radius:7px;background-color:#05beee;color:#fff;font-weight:300}"]}),e})()},ZRew:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return b}));var i=n("fXoL"),r=n("PqYM"),o=n("ofXK");class c{constructor(e,t){this.relativePath=e,this.fileEntry=t}}let s=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(Object(i.Xb)(i.T))},e.\u0275dir=Object(i.Sb)({type:e,selectors:[["","ngx-file-drop-content-tmp",""]]}),e})();const l=["fileSelector"];function a(e,t){if(1&e&&(Object(i.dc)(0,"div",8),Object(i.ad)(1),Object(i.cc)()),2&e){const e=Object(i.sc)(2);Object(i.Kb)(1),Object(i.bd)(e.dropZoneLabel)}}function d(e,t){if(1&e){const e=Object(i.ec)();Object(i.dc)(0,"div"),Object(i.dc)(1,"input",9),Object(i.oc)("click",(function(t){return Object(i.Pc)(e),Object(i.sc)(2).openFileSelector(t)})),Object(i.cc)(),Object(i.cc)()}if(2&e){const e=Object(i.sc)(2);Object(i.Kb)(1),Object(i.Ac)("value",e.browseBtnLabel),Object(i.zc)("className",e.browseBtnClassName)}}function p(e,t){if(1&e&&(Object(i.Yc)(0,a,2,1,"div",6),Object(i.Yc)(1,d,2,2,"div",7)),2&e){const e=Object(i.sc)();Object(i.zc)("ngIf",e.dropZoneLabel),Object(i.Kb)(1),Object(i.zc)("ngIf",e.showBrowseBtn)}}function u(e,t){}const f=function(e){return{openFileSelector:e}};let g=(()=>{class e{constructor(e,t){this.zone=e,this.renderer=t,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new i.r,this.onFileOver=new i.r,this.onFileLeave=new i.r,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=e=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",e=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",e=>{this.globalDraggingInProgress=!1})}get disabled(){return this._disabled}set disabled(e){this._disabled=null!=e&&""+e!="false"}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(e){this.useDragEnter?this.preventAndStop(e):this.isDropzoneDisabled()||this.useDragEnter||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragEnter(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragLeave(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}dropFiles(e){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)){let t;e.dataTransfer.dropEffect="copy",t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}}uploadFiles(e){!this.isDropzoneDisabled()&&e.target&&(this.checkFiles(e.target.files||[]),this.resetFileInput())}checkFiles(e){for(let t=0;t<e.length;t++){const n=e[t];let i=null;if(this.canGetAsEntry(n)&&(i=n.webkitGetAsEntry()),i)if(i.isFile){const e=new c(i.name,i);this.addToQueue(e)}else i.isDirectory&&this.traverseFileTree(i,i.name);else if(n){const e={name:n.name,isDirectory:!1,isFile:!0,file:e=>{e(n)}},t=new c(e.name,e);this.addToQueue(t)}}this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(r.a)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const e=this.files;this.files=[],this.onFileDrop.emit(e)}})}traverseFileTree(e,t){if(e.isFile){const n=new c(t,e);this.files.push(n)}else{t+="/";const n=e.createReader();let i=[];const r=()=>{this.numOfActiveReadEntries++,n.readEntries(n=>{if(n.length)i=i.concat(n),r();else if(0===i.length){const n=new c(t,e);this.zone.run(()=>{this.addToQueue(n)})}else for(let e=0;e<i.length;e++)this.zone.run(()=>{this.traverseFileTree(i[e],t+i[e].name)});this.numOfActiveReadEntries--})};r()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const e=this.fileSelector.nativeElement,t=e.parentElement,n=this.getHelperFormElement(),i=this.getFileInputPlaceholderElement();t!==n&&(this.renderer.insertBefore(t,i,e),this.renderer.appendChild(n,e),n.reset(),this.renderer.insertBefore(t,e,i),this.renderer.removeChild(t,i))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}canGetAsEntry(e){return!!e.webkitGetAsEntry}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(e){this.files.push(e)}preventAndStop(e){e.stopPropagation(),e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(Object(i.Xb)(i.G),Object(i.Xb)(i.M))},e.\u0275cmp=Object(i.Rb)({type:e,selectors:[["ngx-file-drop"]],contentQueries:function(e,t,n){var r;1&e&&Object(i.Qb)(n,s,!0,i.T),2&e&&Object(i.Mc)(r=Object(i.pc)())&&(t.contentTemplate=r.first)},viewQuery:function(e,t){var n;1&e&&Object(i.Uc)(l,!0),2&e&&Object(i.Mc)(n=Object(i.pc)())&&(t.fileSelector=n.first)},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[[3,"className","drop","dragover","dragenter","dragleave"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"className","value","click"]],template:function(e,t){if(1&e&&(Object(i.dc)(0,"div",0),Object(i.oc)("drop",(function(e){return t.dropFiles(e)}))("dragover",(function(e){return t.onDragOver(e)}))("dragenter",(function(e){return t.onDragEnter(e)}))("dragleave",(function(e){return t.onDragLeave(e)})),Object(i.dc)(1,"div",1),Object(i.dc)(2,"input",2,3),Object(i.oc)("change",(function(e){return t.uploadFiles(e)})),Object(i.cc)(),Object(i.Yc)(4,p,2,2,"ng-template",null,4,i.Zc),Object(i.Yc)(6,u,0,0,"ng-template",5),Object(i.cc)(),Object(i.cc)()),2&e){const e=Object(i.Nc)(5);Object(i.Pb)("ngx-file-drop__drop-zone--over",t.isDraggingOverDropZone),Object(i.zc)("className",t.dropZoneClassName),Object(i.Kb)(1),Object(i.zc)("className",t.contentClassName),Object(i.Kb)(1),Object(i.zc)("accept",t.accept)("multiple",t.multiple),Object(i.Lb)("directory",t.directory||void 0)("webkitdirectory",t.directory||void 0)("mozdirectory",t.directory||void 0)("msdirectory",t.directory||void 0)("odirectory",t.directory||void 0),Object(i.Kb)(4),Object(i.zc)("ngTemplateOutlet",t.contentTemplate||e)("ngTemplateOutletContext",Object(i.Ec)(13,f,t.openFileSelector))}},directives:[o.t,o.o],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),e})(),b=(()=>{class e{}return e.\u0275mod=Object(i.Vb)({type:e,bootstrap:[g]}),e.\u0275inj=Object(i.Ub)({factory:function(t){return new(t||e)},providers:[],imports:[[o.c]]}),e})()}}]);